{% extends 'app/base.html' %}
{% load static %}

{% block content %}
<h2>All Donations</h2>

<!-- Filter Form -->
<form method="get" class="mb-4">
    <div class="row">
        <div class="col-md-3">
            <label for="expiry_date" class="form-label">Filter by Expiry Date:</label>
            <input type="date" id="expiry_date" name="expiry_date" class="form-control"
                value="{{ request.GET.expiry_date }}">
        </div>
        <div class="col-md-3">
            <label for="rating" class="form-label">Filter by Rating:</label>
            <input type="number" id="rating" name="rating" class="form-control" value="{{ request.GET.rating }}" min="1"
                max="5">
        </div>
        <div class="col-md-3">
            <label for="quantity" class="form-label">Filter by Quantity:</label>
            <input type="number" id="quantity" name="quantity" class="form-control" value="{{ request.GET.quantity }}"
                min="1">
        </div>
        <div class="col-md-3">
            <button type="submit" class="btn btn-success mt-4">Apply Filters</button>
        </div>
    </div>
</form>

{% if donations %}
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
    {% for donation in donations %}
    <div class="col">
        <div class="card h-100">
            {% if donation.image %}
            <img src="{{ donation.image.url }}" class="card-img-top fixed-image" alt="{{ donation.title }}">
            {% else %}
            <img src="{% static 'images/icon.png' %}" class="card-img-top fixed-image" alt="No Image">
            {% endif %}
            <div class="card-body">
                <h5 class="card-title">{{ donation.title }}</h5>
                <p class="card-text">Quantity: {{ donation.quantity }}</p>
                <p class="card-text">Status: {{ donation.get_status_display }}</p>
                <p class="card-text">Expiry Date: {{ donation.expiry_date }}</p>
            </div>
            <div class="card-footer">
                <a href="#" class="btn btn-success">Request Donation</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info">No donations available at the moment.</div>
{% endif %}
{% endblock %}